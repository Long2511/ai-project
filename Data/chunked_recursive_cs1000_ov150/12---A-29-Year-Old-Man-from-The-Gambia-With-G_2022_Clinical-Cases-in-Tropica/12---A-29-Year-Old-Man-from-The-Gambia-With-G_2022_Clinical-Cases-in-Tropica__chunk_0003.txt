Treat him for syphilis with a single dose of IM benzathine penicillin 2.4 million units. Treat him for chancroid with a single dose of azithromycin 1 g PO or ciprofloxacin 500 mg bid for 3 days or erythromycin 500mg qds for 7 days. If he is HIV-positive, consider adding aciclovir 400 mg tds for 7 days.

He is at high risk of HIV because he has acquired a genital ulcer from a commercial sex worker, so you should test him for HIV and start antiretroviral treatment if positive. Serology for syphilis will be helpful in guiding treatment for his sexual partners, but he should be treated for syphilis even if it is negative, because serology can be negative in early primary syphilis. He should be strongly encouraged to bring his sexual partners to the clinic for assessment and treatment.